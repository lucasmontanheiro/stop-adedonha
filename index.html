<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <title>STOP / Adedonha</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-container">
    <h1>STOP / Adedonha</h1>

    <!-- View: Config -->
    <div id="view-config">
      <div class="muted">ConfiguraÃ§Ãµes da Sala</div>
      <div class="card">
        <div class="field-group">
          <label>Seu Nome</label>
          <input id="playerName" placeholder="Ex: Ana" />
        </div>

        <div id="extraSettings" class="hidden">
          <div class="row">
            <div class="field-group">
              <label>Room Code</label>
              <input id="roomId" placeholder="ABC123" />
            </div>
            <div class="field-group">
              <label>Tempo (s)</label>
              <div style="display:flex; align-items:center; gap:8px;">
                <input type="number" id="seconds" min="10" max="600" step="5" />
                <label style="margin:0; white-space:nowrap; display:flex; align-items:center; gap:4px; text-transform:none; font-size:12px; font-weight:normal; color:var(--text);">
                  <input type="checkbox" id="noLimit" style="width:auto; margin:0;" /> Sem limite
                </label>
              </div>
            </div>
          </div>
          <div class="field-group">
            <label>Letras VÃ¡lidas</label>
            <input id="alphabet" />
          </div>
          <div class="field-group">
            <label>Categorias (uma por linha)</label>
            <textarea id="categories" rows="5"></textarea>
            <button id="applyCategoriesBtn" class="ghost" style="margin-top:4px">Salvar categorias localmente</button>
          </div>
        </div>
        
        <div class="settings-toggle">
          <button id="toggleSettingsBtn" class="ghost">ConfiguraÃ§Ãµes AvanÃ§adas â†“</button>
        </div>

        <div class="action-bar">
          <button class="primary" id="startRoundBtn">ğŸš€ Iniciar Nova Rodada</button>
          <div class="row" style="margin-bottom: 0;">
            <button id="joinBtn" class="secondary">ğŸ”— Atualizar URL</button>
            <button id="resetBtn" class="secondary" title="Reset local">ğŸ—‘ï¸ Reset</button>
          </div>
        </div>
      </div>
    </div>

    <!-- View: Game -->
    <div id="view-game" class="hidden">
      <div class="card">
        <div class="game-stats">
          <div class="stat-pill">
            <span class="stat-label">Rodada</span>
            <span id="roundNum" class="stat-value">â€”</span>
          </div>
          <div class="stat-pill">
            <span class="stat-label">Letra</span>
            <span id="letter" class="stat-value big">â€”</span>
          </div>
          <div class="stat-pill">
            <span class="stat-label">Tempo</span>
            <span id="timeLeft" class="stat-value">â€”</span>
          </div>
        </div>
        <div style="text-align: center;">
          <span id="status" class="status-badge">SEM RODADA</span>
        </div>
      </div>

      <div class="card" id="playCard">
        <h2 id="sheetTitle" style="text-align: center; margin-bottom: 16px;">Sua Planilha</h2>
        
        <div id="notInRound" class="muted" style="padding: 20px 0;">
          Nenhuma rodada ativa.<br>Configure na aba anterior ou entre pelo link.
        </div>

        <div id="inputsWrap" class="hidden"></div>

        <!-- Post-Game Workflow -->
        <div id="postGameSteps" class="hidden" style="margin-top: 20px; padding: 16px; border: 2px dashed var(--primary); border-radius: var(--radius); background: #f0f7ff;">
          <h3 style="margin: 0 0 8px; font-size: 16px; color: var(--primary);">ğŸ Rodada Encerrada!</h3>
          <p style="font-size: 13px; margin: 0 0 12px; color: var(--text);">Para comparar os resultados:</p>
          <ol style="font-size: 13px; padding-left: 20px; margin: 0; color: var(--text); line-height: 1.6;">
            <li>Clique em <b>"ğŸ“¤ Enviar para o Grupo"</b> abaixo.</li>
            <li>Cole o link no seu grupo de WhatsApp/Discord.</li>
            <li>O anfitriÃ£o deve <b>clicar em todos os links</b> enviados para consolidar tudo na aba <b>"ğŸ“Š Placar"</b>.</li>
          </ol>
        </div>

        <div id="gameActions" class="action-bar hidden">
          <button class="primary" id="stopBtn" style="background: var(--accent-warn);">ğŸ›‘ STOP!</button>
          
          <div id="postGameActions" class="hidden">
            <button id="copyBtn" class="primary" style="margin-bottom: 8px;">ğŸ“¤ Enviar para o Grupo (com respostas)</button>
            <div class="row" style="margin-bottom: 0;">
              <button id="revealBtn" class="secondary">âœ¨ Ver Texto (p/ Chat)</button>
              <button id="goToCompareBtn" class="secondary">ğŸ“Š Ver Placar</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- View: Placar (Comparison) -->
    <div id="view-compare" class="hidden">
      <div id="importNotify" class="import-toast hidden">Respostas importadas!</div>
      <div class="card">
        <h2 style="text-align: center; margin-bottom: 4px;">ComparaÃ§Ã£o</h2>
        <div class="muted">Receba links de amigos para comparar aqui.</div>
        
        <div class="compare-table-wrap">
          <table id="compareTable">
            <thead><tr id="compareHead"></tr></thead>
            <tbody id="compareBody"></tbody>
          </table>
        </div>

        <div class="action-bar" style="margin-top: 16px;">
          <button id="clearPeersBtn" class="secondary" style="font-size: 12px; padding: 8px;">Limpar outros jogadores</button>
        </div>
      </div>
    </div>

    <!-- View: Reveal (Full screen overlay style) -->
    <div class="card hidden" id="revealCard">
      <h2>Resumo da Rodada</h2>
      <div class="answers" id="answersOut"></div>
      <div class="action-bar">
        <button id="backBtn" class="primary">Voltar ao Jogo</button>
      </div>
    </div>
  </div>

  <nav class="tab-bar" id="tabBar">
    <button class="tab-btn active" id="btn-tab-config">
      <span>âš™ï¸</span> Config
    </button>
    <button class="tab-btn" id="btn-tab-game">
      <span>âœï¸</span> Jogo
    </button>
    <button class="tab-btn" id="btn-tab-compare">
      <span>ğŸ“Š</span> Placar
    </button>
  </nav>

  <script src="script.js"></script>
</body>
</html>
